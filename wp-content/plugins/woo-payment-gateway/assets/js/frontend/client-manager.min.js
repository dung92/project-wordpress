!function(r){var c={params:wc_braintree_client_manager_params,init:function(){this.container=this.get_container_class(),this.currency=this.params.currency,r(document.body).on("update_checkout",this.update_currency),r(document.body).on("updated_checkout",this.updated_checkout),r(document.body).on("removed_coupon_in_checkout",this.coupon_removed.bind(this)),"checkout"===this.params.page_id&&"undefined"!=typeof wc_braintree_cart_needs_payment||this.create_client()},is_processing:function(){return this.processing},create_client:function(n){this.processing=!0,"undefined"!=typeof wc_braintree_client_token?(Array.isArray(wc_braintree_client_token)&&(wc_braintree_client_token=wc_braintree_client_token[0]),braintree.client.create({authorization:wc_braintree_client_token},function(e,t){this.processing=!1,e?c.submit_error(e):(c.client=t,void 0!==n?wc_braintree.triggerClientUpdate(t,c.params.merchant_account):wc_braintree.triggerClientReady(t,c.params.merchant_account),r(document.body).triggerHandler("wc_braintree_client_created",[t,wc_braintree_client_token,c.params.merchant_account]))})):c.submit_error({code:"INVALID_CLIENT_TOKEN"})},submit_error:function(e){r(document.body).triggerHandler("wc_braintree_submit_error",{error:e,element:c.container})},get_container_class:function(){return r("body").hasClass("woocommerce-cart")?"div.woocommerce":r("body").hasClass("woocommerce-checkout")?"ul.payment_methods":r("body").hasClass("woocommerce-add-payment-method")?"div.woocommerce":r("body").hasClass("single-product")?"div.woocommerce-notices-wrapper":void 0},update_currency:function(){c.currency=c.get_currency()},get_currency:function(){var e=r('[id^="payment_method_braintree_"][name="payment_method"]').first();if(e){var t=r(".woocommerce_"+e.val()+"_data").data("gateway");return t?t.currency:c.currency}return c.currency},updated_checkout:function(){c.currency!==c.get_currency()&&(c.get_client_token(),c.currency=c.get_currency()),!c.client&&!c.is_processing()&&"undefined"!=typeof wc_braintree_cart_needs_payment&&0<r('[name="payment_method"]').length&&c.create_client()},get_client_token:function(){r.when(r.ajax({method:"POST",url:c.params.url,data:{_wpnonce:this.params._wpnonce,currency:c.get_currency()}})).done(function(e){wc_braintree_client_token=e,c.create_client(!0)}).fail(function(){})},coupon_removed:function(){c.client||"undefined"==typeof wc_braintree_cart_needs_payment||r(document.body).one("updated_checkout",function(){c.create_client()})}};c.init()}(jQuery,window.wc_braintree);